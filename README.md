# Zebra - Code Diff Editor Widget

## Рабочие комментарии для себя - оставляю для демонстрации мышления

**Идея:**
Делаю десктопное приложение, в нем можно сгенерировать какой то код или вставить его или написать с нуля.
Нажать на кнопку и написать промпт, чтобы код превратился в то что нужно и слева был старый код и справа в этом случае появлялся новый код.
Была возможность выбрать режим отображения (слева старый, справа новый) / все в одном поле, просто в перемешку. В обоих вариантах будет подсветка синтаксиса как в github, vscode, показывающая удаленные, добавленные строки. Во всех полях, которые показывают сгененированный или исправленный код можно редавтировать код.

Должны быть кнопки назад, чтобы отменить генерацию кода или свои изменения которые добавил в код. Должно быть можно перегенерировать код с нуля, на основе исходника с дополнительным уведомлением, что эти действия повлекут потерю всех изменений в текущем коде.

После открытия приложения сразу будет видно два поля слева и справа. Сверху меню, поля для ввода промпта и кнопка выполнить, кнопки назад, вперед, сохранить, сохранить как. В левое можно писать, а можно перетащить файл с кодом.

Для больших файлов продумать механизм отложенной отрисовки.
Подсветка синтаксиса в режиме реального времени.

**План:**
День 1
- [x] Создаю струкуту проекта
- [x] Реализую основное окно и две панели слева и справа - редактирование и отображения итогового кода
- [x] Реализую меню и тулбар (промпт, выполнить, сохранить, назад, вперед, режим отображения колонок)
- [x] Настроить поддержку кнопок назад вперед
- [x] Настраиваю drag-and-drop или вставить текст в левую панель
- [x] Реализую заглушку аи по клику на кнопку выполнить
- [x] Реализую простую логику разницы через difflib - новое или измененное подсвечивается в правом поле зеленым в режиме реального времени
- [x] Добавляю нумерованные строки

День 2
- [x] Организую положение поля промпта, главных полей и кнопок
- [x] Добавляю поддержку двух режимов: inline, side by side
- [] Реализую поддержку раскрытия немодифицированных блоков
- [] Отлаживаю визуальное выделение новых, удаленных строк
- [] Отлаживаю генерацию разницы между версиями кода в режие реального времени
- [] Добавляю уведомление при процессе перегенерации, когда что-то есть в правом поле
- [x] Добавить иконки вместо строк для кнопок
Нужно чтобы новые пустые строки также подсвечивались как новые
Подсвечивались удаленные - для этого в левой области будем подсвечивать красным удаленные в правой области
Добавить значки + / - для отображения добавленного удаленного

Скрывать и группировать неизмененные строки - скрывать только справа, но выравнивать их по левому оригиналу, то есть в правой области будут пробелы, если добавлены строки между строк

День 3
- [] Добавляю поддержку сохранить, сохранить как
- [x] Добавляю поддержку смены тем (темная, светлая) - хорошо бы успеть сделать плавнй переход - перекатывание, слайд или фейд
- [] Шлифую стили, шрифты
- [] Шлифую README
- [] Готовлю установочный пакет
- [] Записываю скринкаст

Скорее всего не успею, идеи на будущее:
- [] Реализую lazy diff для больших файлов + прогресс бар
- [] Подключаю подсветку синтаксиса (сделать хотя бы для одного языка, например, python, можно вынести в настройки и добавить галочки, чтобы пользователь мог включать только используемые им языки, так разгрузим систему)
